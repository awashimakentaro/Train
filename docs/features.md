# ç­‹ãƒˆãƒ¬ç®¡ç†ã‚¢ãƒ—ãƒª - è©³ç´°æ©Ÿèƒ½ä»•æ§˜æ›¸ (features.md)

## ç›®æ¬¡
1. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦](#1-ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦)
2. [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](#2-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ)
3. [çŠ¶æ…‹ç®¡ç†ã¨ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼](#3-çŠ¶æ…‹ç®¡ç†ã¨ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼)
4. [æ©Ÿèƒ½è©³ç´°](#4-æ©Ÿèƒ½è©³ç´°)
5. [ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ](#5-ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ)
6. [ãƒ‡ãƒ¼ã‚¿é€£æºãƒ•ãƒ­ãƒ¼](#6-ãƒ‡ãƒ¼ã‚¿é€£æºãƒ•ãƒ­ãƒ¼)
7. [APIè¨­è¨ˆï¼ˆå°†æ¥å®Ÿè£…ï¼‰](#7-apiè¨­è¨ˆå°†æ¥å®Ÿè£…)
8. [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–](#8-ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–)

---

## 1. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

### 1.1 ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           User Interface (UI)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Menu Tab â”‚ Body Tab â”‚ Calories Tab â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚              Tab Bar Navigation             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Application State (React State)       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Menu Presets â”‚ Body Data History     â”‚   â”‚
â”‚  â”‚ Exercises    â”‚ Calorie History       â”‚   â”‚
â”‚  â”‚ UI State     â”‚ Training Session Data â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Data Persistence Layer (Future)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ AsyncStorage â”‚ SQLite / Cloud DB     â”‚   â”‚
â”‚  â”‚ (Local)      â”‚ (Remote Sync)         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è©³ç´°

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **React Native (Expo)**: ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é–‹ç™ºãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **TypeScript**: å‹å®‰å…¨æ€§ã®ç¢ºä¿
- **Tailwind CSS v4.0**: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
- **Recharts**: ãƒ‡ãƒ¼ã‚¿ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚°ãƒ©ãƒ•è¡¨ç¤ºï¼‰
- **Lucide React**: ã‚¢ã‚¤ã‚³ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

#### çŠ¶æ…‹ç®¡ç†
- **React Hooks (useState)**: ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹ç®¡ç†
- **Props Drilling**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®ãƒ‡ãƒ¼ã‚¿å—ã‘æ¸¡ã—
- **å°†æ¥**: Context API / Redux / Zustand ã®å°å…¥æ¤œè¨

#### ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
- **AsyncStorage**: ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ãªKey-Valueï¼‰
- **SQLite**: ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«DBï¼ˆè¤‡é›‘ãªã‚¯ã‚¨ãƒªãŒå¿…è¦ãªå ´åˆï¼‰
- **Supabase / Firebase**: ã‚¯ãƒ©ã‚¦ãƒ‰ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆåŒæœŸãƒ»èªè¨¼ï¼‰

---

## 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 2.1 ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ï¼ˆãƒ¡ãƒ¢ãƒªä¸Šï¼‰

#### 2.1.1 Exercisesï¼ˆãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ç¨®ç›®ï¼‰
```typescript
interface Exercise {
  id: string;              // ãƒ¦ãƒ‹ãƒ¼ã‚¯IDï¼ˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãƒ™ãƒ¼ã‚¹ï¼‰
  name: string;            // ç¨®ç›®åï¼ˆä¾‹: ãƒ™ãƒ³ãƒãƒ—ãƒ¬ã‚¹ï¼‰
  weight: number;          // ä½¿ç”¨é‡é‡ï¼ˆkgï¼‰
  sets: number;            // ã‚»ãƒƒãƒˆæ•°
  restTime: number;        // ä¼‘æ†©æ™‚é–“ï¼ˆç§’ï¼‰
  trainingTime: number;    // å®Ÿæ–½æ™‚é–“ï¼ˆç§’ï¼‰
  enabled: boolean;        // æœ‰åŠ¹/ç„¡åŠ¹ãƒ•ãƒ©ã‚°
  memo?: string;           // ãƒ¡ãƒ¢ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  youtubeUrl?: string;     // YouTubeå‚è€ƒå‹•ç”»URLï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
}
```

**æ ¼ç´å ´æ‰€**: `MenuPreset.exercises[]`  
**ã‚¢ã‚¯ã‚»ã‚¹**: `App.tsx` ã® `menuPresets` stateçµŒç”±

#### 2.1.2 MenuPresetsï¼ˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ—ãƒªã‚»ãƒƒãƒˆï¼‰
```typescript
interface MenuPreset {
  id: string;              // ãƒ¦ãƒ‹ãƒ¼ã‚¯IDï¼ˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãƒ™ãƒ¼ã‚¹ï¼‰
  name: string;            // ãƒ—ãƒªã‚»ãƒƒãƒˆåï¼ˆä¾‹: èƒ¸ãƒ»è‚©ã®æ—¥ï¼‰
  exercises: Exercise[];   // ç¨®ç›®é…åˆ—
}
```

**æ ¼ç´å ´æ‰€**: `App.tsx` ã® `menuPresets` state  
**åˆæœŸå€¤**: ç©ºé…åˆ— `[]`  
**æ“ä½œ**:
- ä½œæˆ: `handleCreatePreset()`
- å‰Šé™¤: `handleDeletePreset()`
- é¸æŠ: `setSelectedPresetId()`

#### 2.1.3 BodyDataï¼ˆèº«ä½“ãƒ‡ãƒ¼ã‚¿ï¼‰
```typescript
interface BodyData {
  date: string;              // æ—¥ä»˜ï¼ˆYYYY-MM-DDå½¢å¼ï¼‰
  weight?: number;           // ä½“é‡ï¼ˆkgï¼‰
  bodyFat?: number;          // ä½“è„‚è‚ªç‡ï¼ˆ%ï¼‰
  muscleMass?: number;       // ç­‹è‚‰é‡ï¼ˆkgï¼‰
  bmi?: number;              // BMI
  waterContent?: number;     // æ°´åˆ†é‡ï¼ˆ%ï¼‰
  visceralFat?: number;      // å†…è‡“è„‚è‚ªãƒ¬ãƒ™ãƒ«
  basalMetabolism?: number;  // åŸºç¤ä»£è¬ï¼ˆkcalï¼‰
}
```

**æ ¼ç´å ´æ‰€**: `App.tsx` ã® `bodyDataHistory` state  
**åˆæœŸå€¤**: ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼ˆéå»7æ—¥åˆ†ï¼‰  
**ã‚½ãƒ¼ãƒˆ**: æ—¥ä»˜é™é †ï¼ˆæœ€æ–°ãŒå…ˆé ­ï¼‰  
**æ“ä½œ**:
- è¿½åŠ : `handleAddBodyData()`ï¼ˆå½“æ—¥ãƒ‡ãƒ¼ã‚¿ã¯ä¸Šæ›¸ãï¼‰
- æ›´æ–°: `handleUpdateBodyData()`
- å‰Šé™¤: `handleDeleteBodyData()`

#### 2.1.4 CalorieDataï¼ˆã‚«ãƒ­ãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼‰
```typescript
interface CalorieData {
  date: string;              // æ—¥ä»˜ï¼ˆYYYY-MM-DDå½¢å¼ï¼‰
  consumed: number;          // æ‘‚å–ã‚«ãƒ­ãƒªãƒ¼ï¼ˆkcalï¼‰
  burned: number;            // æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼ï¼ˆkcalï¼‰
  trainingSessions: {
    menuName: string;        // ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ¡ãƒ‹ãƒ¥ãƒ¼å
    calories: number;        // æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼
    time: number;            // å®Ÿæ–½æ™‚é–“ï¼ˆç§’ï¼‰
  }[];
}
```

**æ ¼ç´å ´æ‰€**: `App.tsx` ã® `calorieHistory` state  
**åˆæœŸå€¤**: ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼ˆéå»7æ—¥åˆ†ï¼‰  
**ã‚½ãƒ¼ãƒˆ**: æ—¥ä»˜é™é †ï¼ˆæœ€æ–°ãŒå…ˆé ­ï¼‰  
**æ“ä½œ**:
- æ‘‚å–ã‚«ãƒ­ãƒªãƒ¼è¿½åŠ : `handleAddConsumedCalories()`ï¼ˆç´¯ç©åŠ ç®—ï¼‰
- æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼è¿½åŠ : `handleAddBurnedCalories()`ï¼ˆç´¯ç©åŠ ç®—ï¼‰
- ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Œäº†æ™‚è‡ªå‹•è¨˜éŒ²: `handleFinishTraining()`

### 2.2 å°†æ¥ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆï¼ˆSQLite / Cloud DBï¼‰

#### 2.2.1 ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

**users ãƒ†ãƒ¼ãƒ–ãƒ«**
```sql
CREATE TABLE users (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,
  email TEXT UNIQUE,
  weight REAL,  -- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä½“é‡
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**menu_presets ãƒ†ãƒ¼ãƒ–ãƒ«**
```sql
CREATE TABLE menu_presets (
  id TEXT PRIMARY KEY,
  user_id TEXT NOT NULL,
  name TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
```

**exercises ãƒ†ãƒ¼ãƒ–ãƒ«**
```sql
CREATE TABLE exercises (
  id TEXT PRIMARY KEY,
  preset_id TEXT NOT NULL,
  name TEXT NOT NULL,
  weight REAL NOT NULL,
  sets INTEGER NOT NULL,
  rest_time INTEGER NOT NULL,
  training_time INTEGER NOT NULL,
  enabled BOOLEAN DEFAULT TRUE,
  memo TEXT,
  youtube_url TEXT,
  order_index INTEGER NOT NULL,  -- è¡¨ç¤ºé †åº
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (preset_id) REFERENCES menu_presets(id) ON DELETE CASCADE
);
```

**body_data ãƒ†ãƒ¼ãƒ–ãƒ«**
```sql
CREATE TABLE body_data (
  id TEXT PRIMARY KEY,
  user_id TEXT NOT NULL,
  date DATE NOT NULL,
  weight REAL,
  body_fat REAL,
  muscle_mass REAL,
  bmi REAL,
  water_content REAL,
  visceral_fat INTEGER,
  basal_metabolism INTEGER,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  UNIQUE(user_id, date)  -- 1æ—¥1ã‚¨ãƒ³ãƒˆãƒª
);
```

**calorie_data ãƒ†ãƒ¼ãƒ–ãƒ«**
```sql
CREATE TABLE calorie_data (
  id TEXT PRIMARY KEY,
  user_id TEXT NOT NULL,
  date DATE NOT NULL,
  consumed INTEGER DEFAULT 0,
  burned INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  UNIQUE(user_id, date)
);
```

**training_sessions ãƒ†ãƒ¼ãƒ–ãƒ«**
```sql
CREATE TABLE training_sessions (
  id TEXT PRIMARY KEY,
  calorie_data_id TEXT NOT NULL,
  menu_name TEXT NOT NULL,
  calories INTEGER NOT NULL,
  time INTEGER NOT NULL,  -- ç§’
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (calorie_data_id) REFERENCES calorie_data(id) ON DELETE CASCADE
);
```

**training_logs ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆå°†æ¥æ‹¡å¼µï¼‰**
```sql
CREATE TABLE training_logs (
  id TEXT PRIMARY KEY,
  user_id TEXT NOT NULL,
  preset_id TEXT NOT NULL,
  started_at TIMESTAMP NOT NULL,
  completed_at TIMESTAMP,
  total_time INTEGER,
  total_calories INTEGER,
  status TEXT CHECK(status IN ('in_progress', 'completed', 'cancelled')),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY (preset_id) REFERENCES menu_presets(id) ON DELETE SET NULL
);
```

**exercise_logs ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆå°†æ¥æ‹¡å¼µï¼‰**
```sql
CREATE TABLE exercise_logs (
  id TEXT PRIMARY KEY,
  training_log_id TEXT NOT NULL,
  exercise_id TEXT NOT NULL,
  weight REAL NOT NULL,
  sets_completed INTEGER NOT NULL,
  total_time INTEGER NOT NULL,
  calories INTEGER NOT NULL,
  FOREIGN KEY (training_log_id) REFERENCES training_logs(id) ON DELETE CASCADE,
  FOREIGN KEY (exercise_id) REFERENCES exercises(id) ON DELETE SET NULL
);
```

#### 2.2.2 ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­è¨ˆ
```sql
-- æ—¥ä»˜ã§ã®é«˜é€Ÿæ¤œç´¢
CREATE INDEX idx_body_data_date ON body_data(user_id, date DESC);
CREATE INDEX idx_calorie_data_date ON calorie_data(user_id, date DESC);
CREATE INDEX idx_training_logs_date ON training_logs(user_id, started_at DESC);

-- ãƒ—ãƒªã‚»ãƒƒãƒˆãƒ»ç¨®ç›®ã®æ¤œç´¢
CREATE INDEX idx_exercises_preset ON exercises(preset_id, order_index);
```

---

## 3. çŠ¶æ…‹ç®¡ç†ã¨ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 3.1 App.tsx ã®çŠ¶æ…‹ç®¡ç†

#### 3.1.1 Stateå¤‰æ•°ä¸€è¦§
```typescript
// UIçŠ¶æ…‹
const [activeTab, setActiveTab] = useState<TabType>('menu');
const [isTraining, setIsTraining] = useState(false);
const [showTrainingResult, setShowTrainingResult] = useState(false);
const [trainingResultData, setTrainingResultData] = useState<...>(null);

// ãƒ‡ãƒ¼ã‚¿çŠ¶æ…‹
const [menuPresets, setMenuPresets] = useState<MenuPreset[]>([]);
const [selectedPresetId, setSelectedPresetId] = useState<string>('');
const [bodyDataHistory, setBodyDataHistory] = useState<BodyData[]>([...]);
const [calorieHistory, setCalorieHistory] = useState<CalorieData[]>([...]);
```

### 3.2 ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³

#### 3.2.1 ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    App.tsx                          â”‚
â”‚  menuPresets: MenuPreset[]                          â”‚
â”‚  selectedPresetId: string                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“ Props
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  MenuScreen.tsx                     â”‚
â”‚  - ãƒ—ãƒªã‚»ãƒƒãƒˆä¸€è¦§è¡¨ç¤º                                  â”‚
â”‚  - ãƒ—ãƒªã‚»ãƒƒãƒˆé¸æŠ                                      â”‚
â”‚  - ç¨®ç›®ä¸€è¦§è¡¨ç¤ºï¼ˆé¸æŠã—ãŸãƒ—ãƒªã‚»ãƒƒãƒˆï¼‰                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“ onCreatePreset                â†“ onDeletePreset
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleCreatePreset  â”‚      â”‚   handleDeletePreset    â”‚
â”‚ - æ–°è¦Presetä½œæˆ    â”‚      â”‚   - Presetå‰Šé™¤          â”‚
â”‚ - setMenuPresets    â”‚      â”‚   - setMenuPresets      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.2 ç¨®ç›®ç·¨é›†ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
```
MenuScreen.tsx
    â†“ exercises prop (selectedPreset.exercises)
ExerciseItem.tsx
    â†“ onUpdate callback
MenuScreen.tsx
    â†“ onUpdateExercise callback
App.tsx
    â†“ handleUpdateExercise()
setMenuPresets(prev => prev.map(...))
    â†“
MenuScreen.tsx ã«æ–°ã—ã„ exercises ãŒä¼æ’­
    â†“
ExerciseItem.tsx ãŒå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
```

#### 3.2.3 ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Ÿè¡Œã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
```
MenuScreen.tsx
    â†“ ã€Œãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹ã€ãƒœã‚¿ãƒ³
App.tsx (handleStartTraining)
    â†“ setIsTraining(true)
TrainingSession.tsx ãŒãƒã‚¦ãƒ³ãƒˆ
    â†“ exercises propï¼ˆæœ‰åŠ¹ãªç¨®ç›®ã®ã¿ï¼‰
    â†“ userWeight propï¼ˆæœ€æ–°ã®ä½“é‡ï¼‰
ã‚¿ã‚¤ãƒãƒ¼å®Ÿè¡Œãƒ»ã‚«ãƒ­ãƒªãƒ¼è¨ˆç®—
    â†“ onComplete callback
App.tsx (handleFinishTraining)
    â†“ setIsTraining(false)
    â†“ setShowTrainingResult(true)
    â†“ setCalorieHistoryï¼ˆè‡ªå‹•è¨˜éŒ²ï¼‰
TrainingResult.tsx ãŒãƒã‚¦ãƒ³ãƒˆ
    â†“ çµæœè¡¨ç¤º
    â†“ onClose callback
App.tsx
    â†“ setShowTrainingResult(false)
MenuScreen.tsx ã«æˆ»ã‚‹
```

#### 3.2.4 èº«ä½“ãƒ‡ãƒ¼ã‚¿ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
```
BodyDataScreen.tsx
    â†“ ã€Œ+ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ã€ãƒœã‚¿ãƒ³
AddBodyDataModal.tsx ãŒã‚ªãƒ¼ãƒ—ãƒ³
    â†“ ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›
    â†“ onAddBodyData callback
App.tsx (handleAddBodyData)
    â†“ å½“æ—¥ãƒ‡ãƒ¼ã‚¿å­˜åœ¨ãƒã‚§ãƒƒã‚¯
    â†“ å­˜åœ¨ã™ã‚‹ â†’ ä¸Šæ›¸ã
    â†“ å­˜åœ¨ã—ãªã„ â†’ è¿½åŠ 
setBodyDataHistory(...)
    â†“
BodyDataScreen.tsx ã«æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ãŒä¼æ’­
    â†“
BodyDataCard.tsx ãŒå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆæœ€æ–°å€¤ãƒ»ã‚°ãƒ©ãƒ•æ›´æ–°ï¼‰
```

#### 3.2.5 ã‚«ãƒ­ãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
```
CaloriesScreen.tsx
    â†“ ã€Œ+ã‚«ãƒ­ãƒªãƒ¼ã‚’è¿½åŠ ã€ãƒœã‚¿ãƒ³
ã‚«ãƒ­ãƒªãƒ¼å…¥åŠ›ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒã‚ªãƒ¼ãƒ—ãƒ³
    â†“ ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ï¼ˆæ‘‚å– or æ¶ˆè²»ï¼‰
    â†“ onAddConsumedCalories / onAddBurnedCalories callback
App.tsx (handleAddConsumedCalories / handleAddBurnedCalories)
    â†“ å½“æ—¥ãƒ‡ãƒ¼ã‚¿å­˜åœ¨ãƒã‚§ãƒƒã‚¯
    â†“ å­˜åœ¨ã™ã‚‹ â†’ ç´¯ç©åŠ ç®—
    â†“ å­˜åœ¨ã—ãªã„ â†’ æ–°è¦ä½œæˆ
setCalorieHistory(...)
    â†“
CaloriesScreen.tsx ã«æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ãŒä¼æ’­
    â†“
ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ãƒ»ã‚°ãƒ©ãƒ•ãƒ»ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãŒå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
```

### 3.3 Propsä¼æ’­ãƒãƒƒãƒ—

#### App.tsx â†’ MenuScreen.tsx
```typescript
<MenuScreen
  exercises={selectedPreset?.exercises || []}
  onStartTraining={() => setIsTraining(true)}
  onUpdateExercise={handleUpdateExercise}
  selectedPresetId={selectedPresetId}
  setSelectedPresetId={setSelectedPresetId}
  menuPresets={menuPresets}
  onCreatePreset={handleCreatePreset}
  onDeletePreset={handleDeletePreset}
  onAddExercise={handleAddExercise}
  onDeleteExercise={handleDeleteExercise}
/>
```

#### App.tsx â†’ BodyDataScreen.tsx
```typescript
<BodyDataScreen
  bodyDataHistory={bodyDataHistory}
  onAddBodyData={handleAddBodyData}
  onUpdateBodyData={handleUpdateBodyData}
  onDeleteBodyData={handleDeleteBodyData}
/>
```

#### App.tsx â†’ CaloriesScreen.tsx
```typescript
<CaloriesScreen
  bodyDataHistory={bodyDataHistory}
  menuPresets={menuPresets}
  calorieHistory={calorieHistory}
  onAddConsumedCalories={handleAddConsumedCalories}
  onAddBurnedCalories={handleAddBurnedCalories}
/>
```

#### App.tsx â†’ TrainingSession.tsx
```typescript
<TrainingSession 
  exercises={enabledExercises}
  userWeight={bodyDataHistory[0]?.weight || 70}
  onExit={() => setIsTraining(false)}
  onComplete={handleFinishTraining}
/>
```

---

## 4. æ©Ÿèƒ½è©³ç´°

### 4.1 ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ©Ÿèƒ½

#### 4.1.1 ãƒ—ãƒªã‚»ãƒƒãƒˆç®¡ç†

**å ´æ‰€**: `MenuScreen.tsx`

**æ©Ÿèƒ½ä¸€è¦§**:
1. **ãƒ—ãƒªã‚»ãƒƒãƒˆä¸€è¦§è¡¨ç¤º**
   - `menuPresets.map()` ã§ãƒ«ãƒ¼ãƒ—è¡¨ç¤º
   - é¸æŠä¸­ã®ãƒ—ãƒªã‚»ãƒƒãƒˆã¯è¦–è¦šçš„ã«ãƒã‚¤ãƒ©ã‚¤ãƒˆï¼ˆã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯ï¼‰
   - å„ãƒ—ãƒªã‚»ãƒƒãƒˆã«åå‰ãƒ»ç¨®ç›®æ•°ãƒ»å‰Šé™¤ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º

2. **ãƒ—ãƒªã‚»ãƒƒãƒˆé¸æŠ**
   - ã‚¯ãƒªãƒƒã‚¯ã§ `setSelectedPresetId(preset.id)` ã‚’å®Ÿè¡Œ
   - App.tsx ã® `selectedPresetId` ãŒæ›´æ–°ã•ã‚Œã‚‹
   - `selectedPreset` ãŒå¤‰ã‚ã‚Šã€ã€Œä»Šæ—¥ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€ãŒæ›´æ–°ã•ã‚Œã‚‹

3. **ãƒ—ãƒªã‚»ãƒƒãƒˆä½œæˆ**
   - ã€Œ+æ–°ã—ã„ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ä½œæˆã€ãƒœã‚¿ãƒ³
   - `CreatePresetModal.tsx` ãŒé–‹ã
   - ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã§åå‰ãƒ»ç¨®ç›®ã‚’å…¥åŠ›
   - `onCreatePreset(name, exercises)` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ
   - App.tsx ã® `handleCreatePreset()` ã§æ–°è¦ãƒ—ãƒªã‚»ãƒƒãƒˆä½œæˆ
   - `setMenuPresets(prev => [...prev, newPreset])`
   - ä½œæˆã—ãŸãƒ—ãƒªã‚»ãƒƒãƒˆã‚’è‡ªå‹•é¸æŠ: `setSelectedPresetId(newPreset.id)`

4. **ãƒ—ãƒªã‚»ãƒƒãƒˆå‰Šé™¤**
   - å‰Šé™¤ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º
   - ç¢ºèªå¾Œ `onDeletePreset(id)` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ
   - App.tsx ã® `handleDeletePreset()` ã§å‰Šé™¤
   - `setMenuPresets(prev => prev.filter(preset => preset.id !== id))`
   - å‰Šé™¤ã—ãŸãƒ—ãƒªã‚»ãƒƒãƒˆãŒé¸æŠä¸­ãªã‚‰ `setSelectedPresetId('')` ã§ãƒªã‚»ãƒƒãƒˆ

**ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**:
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ â†’ MenuScreen.tsx â†’ Callback â†’ App.tsx
â†’ setMenuPresets() â†’ Stateæ›´æ–° â†’ MenuScreen.tsx å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
```

#### 4.1.2 ç¨®ç›®ç®¡ç†

**å ´æ‰€**: `MenuScreen.tsx` + `ExerciseItem.tsx`

**æ©Ÿèƒ½ä¸€è¦§**:
1. **ç¨®ç›®ä¸€è¦§è¡¨ç¤º**
   - `selectedPreset.exercises.map()` ã§ãƒ«ãƒ¼ãƒ—è¡¨ç¤º
   - å„ç¨®ç›®ã‚’ `ExerciseItem.tsx` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§è¡¨ç¤º
   - ON/OFFãƒˆã‚°ãƒ«ã€å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿ã€å‰Šé™¤ãƒœã‚¿ãƒ³

2. **ç¨®ç›®è¿½åŠ **
   - ã€Œç¨®ç›®è¿½åŠ ã€ãƒœã‚¿ãƒ³ã§å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤º
   - ç¨®ç›®åã€é‡é‡ã€ã‚»ãƒƒãƒˆæ•°ã€ä¼‘æ†©æ™‚é–“ã€å®Ÿæ–½æ™‚é–“ã‚’å…¥åŠ›
   - ã€Œè¿½åŠ ã€ãƒœã‚¿ãƒ³ã§ `onAddExercise(exercise)` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ
   - App.tsx ã® `handleAddExercise()` ã§ç¨®ç›®è¿½åŠ 
   - é¸æŠä¸­ã®ãƒ—ãƒªã‚»ãƒƒãƒˆã® `exercises` é…åˆ—ã«è¿½åŠ 

3. **ç¨®ç›®ç·¨é›†**
   - `ExerciseItem.tsx` ã®å±•é–‹ã‚¨ãƒªã‚¢ã§ç·¨é›†
   - å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å¤‰æ›´æ™‚ã« `onUpdate(id, updates)` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ
   - MenuScreen.tsx â†’ `onUpdateExercise` â†’ App.tsx ã® `handleUpdateExercise()`
   - å¯¾è±¡ãƒ—ãƒªã‚»ãƒƒãƒˆã®å¯¾è±¡ç¨®ç›®ã‚’æ›´æ–°

4. **ç¨®ç›®å‰Šé™¤**
   - å‰Šé™¤ãƒœã‚¿ãƒ³ã§ `onDelete(id)` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ
   - App.tsx ã® `handleDeleteExercise()` ã§å‰Šé™¤
   - `exercises.filter(ex => ex.id !== id)` ã§å¯¾è±¡ç¨®ç›®ã‚’é™¤å¤–

5. **ç¨®ç›®ã®æœ‰åŠ¹/ç„¡åŠ¹åˆ‡ã‚Šæ›¿ãˆ**
   - ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã§ `enabled` ãƒ•ãƒ©ã‚°ã‚’åˆ‡ã‚Šæ›¿ãˆ
   - `onUpdate(id, { enabled })` ã§æ›´æ–°
   - ç„¡åŠ¹ãªç¨®ç›®ã¯ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹æ™‚ã«é™¤å¤–ã•ã‚Œã‚‹

**ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**:
```
ExerciseItem.tsx (ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›)
â†’ onUpdate callback â†’ MenuScreen.tsx
â†’ onUpdateExercise callback â†’ App.tsx
â†’ handleUpdateExercise() â†’ setMenuPresets()
â†’ Stateæ›´æ–° â†’ Propsæ›´æ–° â†’ ExerciseItem.tsx å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
```

#### 4.1.3 ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹

**å ´æ‰€**: `MenuScreen.tsx`

**æ¡ä»¶**:
- æœ‰åŠ¹ãªç¨®ç›®ï¼ˆ`enabled: true`ï¼‰ãŒ1ã¤ä»¥ä¸Šå­˜åœ¨ã™ã‚‹
- æ¡ä»¶ã‚’æº€ãŸã•ãªã„å ´åˆã€ãƒœã‚¿ãƒ³ã¯ç„¡åŠ¹åŒ–ï¼ˆ`disabled: true`ï¼‰

**å®Ÿè¡Œãƒ•ãƒ­ãƒ¼**:
1. ã€ŒğŸ‹ï¸ ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. `onStartTraining()` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ
3. App.tsx ã§ `setIsTraining(true)`
4. App.tsx ãŒ `TrainingSession.tsx` ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
5. æœ‰åŠ¹ãªç¨®ç›®ã®ã¿ã‚’ `enabledExercises` ã¨ã—ã¦æ¸¡ã™
6. æœ€æ–°ã®ä½“é‡ãƒ‡ãƒ¼ã‚¿ã‚’ `userWeight` ã¨ã—ã¦æ¸¡ã™

### 4.2 ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é€²è¡Œæ©Ÿèƒ½

#### 4.2.1 ã‚¿ã‚¤ãƒãƒ¼ã‚·ã‚¹ãƒ†ãƒ 

**å ´æ‰€**: `TrainingSession.tsx`

**çŠ¶æ…‹ç®¡ç†**:
```typescript
const [currentExerciseIndex, setCurrentExerciseIndex] = useState(0);
const [currentSet, setCurrentSet] = useState(1);
const [phase, setPhase] = useState<'training' | 'rest'>('training');
const [timeRemaining, setTimeRemaining] = useState(0);
const [isPaused, setIsPaused] = useState(false);
const [exerciseTimeTracking, setExerciseTimeTracking] = useState<{[key: number]: number}>({});
```

**ã‚¿ã‚¤ãƒãƒ¼ãƒ­ã‚¸ãƒƒã‚¯**:
```typescript
useEffect(() => {
  if (isPaused || timeRemaining === 0) return;

  const timer = setInterval(() => {
    // ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ™‚é–“ã®ã¿è¨˜éŒ²ï¼ˆä¼‘æ†©æ™‚é–“ã¯é™¤å¤–ï¼‰
    if (phase === 'training') {
      setExerciseTimeTracking(prev => ({
        ...prev,
        [currentExerciseIndex]: (prev[currentExerciseIndex] || 0) + 1
      }));
    }

    setTimeRemaining(prev => {
      if (prev <= 1) {
        handlePhaseComplete();
        return 0;
      }
      return prev - 1;
    });
  }, 1000);

  return () => clearInterval(timer);
}, [isPaused, timeRemaining, phase]);
```

**ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»**:
```
ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹
    â†“
ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆtrainingTimeç§’ï¼‰
    â†“ ã‚¿ã‚¤ãƒãƒ¼å®Œäº†
ä¼‘æ†©ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆrestTimeç§’ï¼‰
    â†“ ã‚¿ã‚¤ãƒãƒ¼å®Œäº†
æ¬¡ã‚»ãƒƒãƒˆã¸ï¼ˆcurrentSet++ï¼‰
    â†“ å…¨ã‚»ãƒƒãƒˆå®Œäº†
æ¬¡ç¨®ç›®ã¸ï¼ˆcurrentExerciseIndex++ï¼‰
    â†“ å…¨ç¨®ç›®å®Œäº†
ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Œäº†ï¼ˆonCompleteï¼‰
```

#### 4.2.2 ã‚«ãƒ­ãƒªãƒ¼è¨ˆç®—ã‚·ã‚¹ãƒ†ãƒ 

**è¨ˆç®—æ–¹æ³•**: METsæ³•ï¼ˆMetabolic Equivalentsï¼‰

**å¼·åº¦åˆ¤å®š**:
```typescript
const calculateMETs = (exerciseWeight: number, bodyWeight: number): number => {
  const intensity = exerciseWeight / bodyWeight;
  if (intensity >= 0.5) return 8.0; // é«˜å¼·åº¦
  if (intensity >= 0.3) return 6.0; // ä¸­å¼·åº¦
  return 4.0;                       // ä½å¼·åº¦
};
```

**ã‚«ãƒ­ãƒªãƒ¼è¨ˆç®—**:
```typescript
const calculateCalories = (weight: number, mets: number, timeInSeconds: number): number => {
  const hours = timeInSeconds / 3600;
  return mets * weight * hours;
};
```

**ä¾‹**:
- ä½“é‡: 70kg
- ä½¿ç”¨é‡é‡: 40kgï¼ˆå¼·åº¦ = 40/70 = 0.57 â†’ é«˜å¼·åº¦ 8.0 METsï¼‰
- ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ™‚é–“: 300ç§’ï¼ˆ5åˆ† = 0.083æ™‚é–“ï¼‰
- æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼: 8.0 Ã— 70 Ã— 0.083 = 46.48 kcal

**å„ç¨®ç›®ã®è¨ˆç®—**:
- ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ™‚é–“ã®ã¿ã‚«ã‚¦ãƒ³ãƒˆï¼ˆä¼‘æ†©æ™‚é–“ã¯é™¤å¤–ï¼‰
- `exerciseTimeTracking` ã§å„ç¨®ç›®ã®å®Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ™‚é–“ã‚’è¨˜éŒ²
- å®Œäº†æ™‚ã«å„ç¨®ç›®ã”ã¨ã«ã‚«ãƒ­ãƒªãƒ¼ã‚’è¨ˆç®—
- åˆè¨ˆã‚«ãƒ­ãƒªãƒ¼ã‚’ç®—å‡º

#### 4.2.3 æ“ä½œæ©Ÿèƒ½

**ä¸€æ™‚åœæ­¢/å†é–‹**:
- `isPaused` state ã§åˆ¶å¾¡
- `setIsPaused(!isPaused)` ã§ãƒˆã‚°ãƒ«
- ã‚¿ã‚¤ãƒãƒ¼ã¯ useEffect ã®ä¾å­˜é…åˆ—ã« `isPaused` ã‚’å«ã‚€ãŸã‚è‡ªå‹•ã§åœæ­¢/å†é–‹

**ã‚¹ã‚­ãƒƒãƒ—**:
- ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚ºã‚’å¼·åˆ¶å®Œäº†
- `handlePhaseComplete()` ã‚’ç›´æ¥å®Ÿè¡Œ
- ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ä¸­ â†’ ä¼‘æ†©ã¸
- ä¼‘æ†©ä¸­ â†’ æ¬¡ã‚»ãƒƒãƒˆ/æ¬¡ç¨®ç›®ã¸

**çµ‚äº†**:
- ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º
- ç¢ºèªå¾Œ `onExit()` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ
- App.tsx ã§ `setIsTraining(false)`
- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢ã«æˆ»ã‚‹ï¼ˆãƒ‡ãƒ¼ã‚¿ã¯ä¿å­˜ã•ã‚Œãªã„ï¼‰

**YouTubeå‹•ç”»è¡¨ç¤º**:
- ç¨®ç›®ã« `youtubeUrl` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿è¡¨ç¤º
- YouTubeã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã§å¤–éƒ¨ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã

#### 4.2.4 å®Œäº†å‡¦ç†

**å®Ÿè¡Œãƒ•ãƒ­ãƒ¼**:
1. å…¨ç¨®ç›®ãƒ»å…¨ã‚»ãƒƒãƒˆå®Œäº†
2. å„ç¨®ç›®ã®æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼ã‚’è¨ˆç®—
3. çµæœãƒ‡ãƒ¼ã‚¿ã‚’æ§‹ç¯‰:
```typescript
{
  totalTime: number,
  totalCalories: number,
  completedExercises: [
    {
      name: string,
      weight: number,
      sets: number,
      totalTime: number,
      calories: number
    }
  ]
}
```
4. `onComplete(result)` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ
5. App.tsx ã® `handleFinishTraining()` ã§å‡¦ç†
6. `setIsTraining(false)`
7. `setShowTrainingResult(true)`
8. `setTrainingResultData(result)`
9. ã‚«ãƒ­ãƒªãƒ¼å±¥æ­´ã«è‡ªå‹•è¨˜éŒ²

### 4.3 ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°çµæœæ©Ÿèƒ½

**å ´æ‰€**: `TrainingResult.tsx`

**è¡¨ç¤ºå†…å®¹**:
- ãƒ¡ãƒ‹ãƒ¥ãƒ¼å
- ç·æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼ï¼ˆå¤§ããç›®ç«‹ã¤è¡¨ç¤ºï¼‰
- ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ™‚é–“ï¼ˆåˆ†å˜ä½ï¼‰
- å®Œäº†ç¨®ç›®æ•°
- å„ç¨®ç›®ã®è©³ç´°ï¼ˆåå‰ã€é‡é‡ã€ã‚»ãƒƒãƒˆæ•°ã€æ™‚é–“ã€ã‚«ãƒ­ãƒªãƒ¼ï¼‰

**ãƒ‡ãƒ¼ã‚¿ä¿å­˜**:
- è‡ªå‹•ã§ã‚«ãƒ­ãƒªãƒ¼å±¥æ­´ã«è¨˜éŒ²
- `trainingSession` ã¨ã—ã¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼åãƒ»ã‚«ãƒ­ãƒªãƒ¼ãƒ»æ™‚é–“ã‚’ä¿å­˜
- å½“æ—¥ã®ãƒ‡ãƒ¼ã‚¿ã«è¿½åŠ ï¼ˆè¤‡æ•°ã‚»ãƒƒã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰

**æ“ä½œ**:
- ã€Œå®Œäº†ã€ãƒœã‚¿ãƒ³ã§é–‰ã˜ã‚‹
- App.tsx ã§ `setShowTrainingResult(false)`
- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢ã«æˆ»ã‚‹

### 4.4 èº«ä½“ãƒ‡ãƒ¼ã‚¿ç®¡ç†æ©Ÿèƒ½

#### 4.4.1 ãƒ‡ãƒ¼ã‚¿å…¥åŠ›

**å ´æ‰€**: `AddBodyDataModal.tsx`

**å…¥åŠ›é …ç›®**:
- ä½“é‡ï¼ˆkgï¼‰
- ä½“è„‚è‚ªç‡ï¼ˆ%ï¼‰
- ç­‹è‚‰é‡ï¼ˆkgï¼‰
- BMI
- æ°´åˆ†é‡ï¼ˆ%ï¼‰
- å†…è‡“è„‚è‚ªãƒ¬ãƒ™ãƒ«
- åŸºç¤ä»£è¬ï¼ˆkcalï¼‰

**å…¥åŠ›ãƒ•ãƒ­ãƒ¼**:
1. ã€Œ+ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ã€ãƒœã‚¿ãƒ³ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚ªãƒ¼ãƒ—ãƒ³
2. å„é …ç›®ã‚’å…¥åŠ›ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ï¼‰
3. ã€Œä¿å­˜ã€ãƒœã‚¿ãƒ³ã§ `onAddBodyData(data)` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ
4. App.tsx ã® `handleAddBodyData()` ã§å‡¦ç†
5. å½“æ—¥ã®ãƒ‡ãƒ¼ã‚¿ãŒæ—¢ã«å­˜åœ¨ã™ã‚‹å ´åˆã¯ä¸Šæ›¸ã
6. æ–°è¦ã®å ´åˆã¯é…åˆ—ã®å…ˆé ­ã«è¿½åŠ ï¼ˆæ—¥ä»˜é™é †ç¶­æŒï¼‰

**ä¸Šæ›¸ããƒ­ã‚¸ãƒƒã‚¯**:
```typescript
const today = new Date().toISOString().split('T')[0];
const existingIndex = bodyDataHistory.findIndex(d => d.date === today);

if (existingIndex >= 0) {
  // ä¸Šæ›¸ã
  setBodyDataHistory(prev =>
    prev.map((d, index) =>
      index === existingIndex ? { ...d, ...data } : d
    )
  );
} else {
  // æ–°è¦è¿½åŠ 
  setBodyDataHistory(prev => [{ date: today, ...data }, ...prev]);
}
```

#### 4.4.2 ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºï¼ˆã‚«ãƒ¼ãƒ‰ï¼‰

**å ´æ‰€**: `BodyDataCard.tsx`

**è¡¨ç¤ºå†…å®¹**:
- æŒ‡æ¨™åï¼ˆä½“é‡ã€ä½“è„‚è‚ªç‡ãªã©ï¼‰
- æœ€æ–°å€¤ï¼ˆ1å°æ•°ç‚¹è¡¨ç¤ºï¼‰
- å˜ä½ï¼ˆkg, %, kcal ãªã©ï¼‰
- ãƒˆãƒ¬ãƒ³ãƒ‰ï¼ˆå‰æ—¥æ¯”ï¼‰
  - å¢—åŠ : èµ¤è‰²ãƒ»ä¸ŠçŸ¢å°
  - æ¸›å°‘: ç·‘è‰²ãƒ»ä¸‹çŸ¢å°
  - å¤‰åŒ–ãªã—: ã‚°ãƒ¬ãƒ¼
- 7æ—¥é–“ã®æ¨ç§»ã‚°ãƒ©ãƒ•ï¼ˆæŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ï¼‰

**ã‚°ãƒ©ãƒ•ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ**:
```typescript
const getChartData = (field: keyof BodyData) => {
  return bodyDataHistory
    .slice(0, 7)      // æœ€æ–°7æ—¥åˆ†
    .reverse()        // å¤ã„é †ã«ä¸¦ã³æ›¿ãˆï¼ˆã‚°ãƒ©ãƒ•è¡¨ç¤ºç”¨ï¼‰
    .map(d => ({ value: d[field] || 0 }));
};
```

**ãƒˆãƒ¬ãƒ³ãƒ‰è¨ˆç®—**:
```typescript
const getTrend = (field: keyof BodyData) => {
  if (bodyDataHistory.length < 2) return 0;
  const latest = bodyDataHistory[0][field] || 0;
  const previous = bodyDataHistory[1][field] || 0;
  return latest - previous;
};
```

**ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³**:
- ã‚«ãƒ¼ãƒ‰ã‚¿ãƒƒãƒ—ã§å±¥æ­´ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚ªãƒ¼ãƒ—ãƒ³
- `onHistoryClick()` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ

#### 4.4.3 å±¥æ­´ãƒ¢ãƒ¼ãƒ€ãƒ«

**å ´æ‰€**: `BodyDataHistoryModal.tsx`

**è¡¨ç¤ºå†…å®¹**:
- æŒ‡æ¨™å
- å…¨å±¥æ­´ãƒ‡ãƒ¼ã‚¿ï¼ˆæ—¥ä»˜é™é †ï¼‰
- å„ã‚¨ãƒ³ãƒˆãƒªã®å€¤ã€æ—¥ä»˜ã€ç·¨é›†/å‰Šé™¤ãƒœã‚¿ãƒ³

**ç·¨é›†æ©Ÿèƒ½**:
1. ç·¨é›†ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
2. ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤º
3. å€¤ã‚’å¤‰æ›´
4. ä¿å­˜ãƒœã‚¿ãƒ³ã§ `onUpdateBodyData(date, updates)` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ
5. App.tsx ã® `handleUpdateBodyData()` ã§æ›´æ–°
6. `bodyDataHistory.map()` ã§å¯¾è±¡æ—¥ä»˜ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°

**å‰Šé™¤æ©Ÿèƒ½**:
1. å‰Šé™¤ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
2. ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º
3. ç¢ºèªå¾Œ `onDeleteBodyData(date)` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ
4. App.tsx ã® `handleDeleteBodyData()` ã§å‰Šé™¤
5. `bodyDataHistory.filter(data => data.date !== date)` ã§é™¤å¤–

### 4.5 ã‚«ãƒ­ãƒªãƒ¼ç®¡ç†æ©Ÿèƒ½

#### 4.5.1 ã‚«ãƒ­ãƒªãƒ¼å…¥åŠ›

**å ´æ‰€**: `CaloriesScreen.tsx`ï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«å†…ï¼‰

**å…¥åŠ›ã‚¿ã‚¤ãƒ—**:
1. **æ‘‚å–ã‚«ãƒ­ãƒªãƒ¼**
   - ã‚«ãƒ­ãƒªãƒ¼å€¤ï¼ˆkcalï¼‰ã‚’å…¥åŠ›
   - `onAddConsumedCalories(calories)` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ
   - å½“æ—¥ã® `consumed` ã«åŠ ç®—

2. **æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼**
   - ã‚«ãƒ­ãƒªãƒ¼å€¤ï¼ˆkcalï¼‰ã‚’å…¥åŠ›
   - æ´»å‹•åï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ã‚’å…¥åŠ›
   - `onAddBurnedCalories(calories, activityName)` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ
   - å½“æ—¥ã® `burned` ã«åŠ ç®—
   - æ´»å‹•åãŒã‚ã‚Œã° `trainingSessions` ã«è¨˜éŒ²

**ç´¯ç©åŠ ç®—ãƒ­ã‚¸ãƒƒã‚¯**:
```typescript
const handleAddConsumedCalories = (calories: number) => {
  const today = new Date().toISOString().split('T')[0];
  const existingIndex = calorieHistory.findIndex(d => d.date === today);
  
  if (existingIndex >= 0) {
    // æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã«åŠ ç®—
    setCalorieHistory(prev =>
      prev.map((d, index) =>
        index === existingIndex
          ? { ...d, consumed: d.consumed + calories }
          : d
      )
    );
  } else {
    // æ–°è¦ä½œæˆ
    setCalorieHistory(prev => [
      {
        date: today,
        consumed: calories,
        burned: 0,
        trainingSessions: [],
      },
      ...prev,
    ]);
  }
};
```

#### 4.5.2 ã‚µãƒãƒªãƒ¼è¡¨ç¤º

**å ´æ‰€**: `CaloriesScreen.tsx`

**è¡¨ç¤ºé …ç›®**:
- **æ‘‚å–ã‚«ãƒ­ãƒªãƒ¼**: ç·‘ç³»ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚«ãƒ¼ãƒ‰
- **æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼**: ã‚ªãƒ¬ãƒ³ã‚¸ç³»ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚«ãƒ¼ãƒ‰
- **ã‚«ãƒ­ãƒªãƒ¼åæ”¯**: 
  - ãƒ—ãƒ©ã‚¹ï¼ˆæ‘‚å– > æ¶ˆè²»ï¼‰â†’ èµ¤ç³»ã‚«ãƒ¼ãƒ‰ãƒ»ä¸ŠçŸ¢å°
  - ãƒã‚¤ãƒŠã‚¹ï¼ˆæ‘‚å– < æ¶ˆè²»ï¼‰â†’ é’ç³»ã‚«ãƒ¼ãƒ‰ãƒ»ä¸‹çŸ¢å°

**ãƒ‡ãƒ¼ã‚¿å–å¾—**:
```typescript
const today = new Date().toISOString().split('T')[0];
const todayData = calorieHistory.find(d => d.date === today);
const netCalories = (todayData?.consumed || 0) - (todayData?.burned || 0);
```

#### 4.5.3 é€±é–“ã‚°ãƒ©ãƒ•

**å ´æ‰€**: `CaloriesScreen.tsx`

**ã‚°ãƒ©ãƒ•ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: Rechartsï¼ˆLineChartï¼‰

**ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ**:
```typescript
const chartData = calorieHistory
  .slice(0, 7)      // æœ€æ–°7æ—¥åˆ†
  .reverse()        // å¤ã„é †ã«ä¸¦ã³æ›¿ãˆ
  .map(data => ({
    date: formatDate(data.date),      // ä¾‹: 12/25
    æ‘‚å–: data.consumed,
    æ¶ˆè²»: data.burned,
    å·®åˆ†: data.consumed - data.burned,
  }));
```

**è¡¨ç¤ºå†…å®¹**:
- Xè»¸: æ—¥ä»˜ï¼ˆM/Då½¢å¼ï¼‰
- Yè»¸: ã‚«ãƒ­ãƒªãƒ¼ï¼ˆkcalï¼‰
- 3æœ¬ã®æŠ˜ã‚Œç·š:
  - æ‘‚å–ã‚«ãƒ­ãƒªãƒ¼ï¼ˆç·‘ï¼‰
  - æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼ï¼ˆã‚ªãƒ¬ãƒ³ã‚¸ï¼‰
  - å·®åˆ†ï¼ˆç´«ï¼‰

#### 4.5.4 ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º

**å ´æ‰€**: `CaloriesScreen.tsx`

**ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”Ÿæˆ**:
```typescript
const getCalendarDays = () => {
  const daysInMonth = getDaysInMonth(currentMonth);
  const firstDay = getFirstDayOfMonth(currentMonth);
  const days = [];

  // æœˆåˆã®ç©ºç™½ã‚»ãƒ«
  for (let i = 0; i < firstDay; i++) {
    days.push(null);
  }

  // æ—¥ä»˜ã‚»ãƒ«
  for (let day = 1; day <= daysInMonth; day++) {
    days.push(day);
  }

  return days;
};
```

**ã‚»ãƒ«ã®è¡¨ç¤º**:
- **è‰²åˆ†ã‘**:
  - ã‚«ãƒ­ãƒªãƒ¼ãƒ—ãƒ©ã‚¹ â†’ èµ¤ç³»ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  - ã‚«ãƒ­ãƒªãƒ¼ãƒã‚¤ãƒŠã‚¹ â†’ é’ç³»ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  - ãƒ‡ãƒ¼ã‚¿ãªã— â†’ ã‚°ãƒ¬ãƒ¼
- **ã‚¢ã‚¤ã‚³ãƒ³**:
  - ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Ÿæ–½æ—¥ï¼ˆ`trainingSessions.length > 0`ï¼‰â†’ ç‚ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤º
- **ã‚¿ãƒƒãƒ—**:
  - æ—¥ä»˜ã‚»ãƒ«ã‚¿ãƒƒãƒ—ã§æ—¥åˆ¥è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚ªãƒ¼ãƒ—ãƒ³

**å‰æœˆ/æ¬¡æœˆãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³**:
```typescript
const previousMonth = () => {
  setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1));
};

const nextMonth = () => {
  setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1));
};
```

#### 4.5.5 æ—¥åˆ¥è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«

**è¡¨ç¤ºå†…å®¹**:
- é¸æŠã—ãŸæ—¥ä»˜
- æ‘‚å–ã‚«ãƒ­ãƒªãƒ¼
- æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼
- ã‚«ãƒ­ãƒªãƒ¼åæ”¯
- ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§:
  - ãƒ¡ãƒ‹ãƒ¥ãƒ¼å
  - æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼
  - å®Ÿæ–½æ™‚é–“ï¼ˆåˆ†:ç§’ï¼‰

**ãƒ‡ãƒ¼ã‚¿å–å¾—**:
```typescript
const selectedData = calorieHistory.find(d => d.date === selectedDate);
```

#### 4.5.6 è‡ªå‹•è¨˜éŒ²æ©Ÿèƒ½

**ãƒˆãƒªã‚¬ãƒ¼**: ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Œäº†æ™‚

**å‡¦ç†**: `App.tsx` ã® `handleFinishTraining()`

**è¨˜éŒ²å†…å®¹**:
```typescript
const newSession = {
  menuName: selectedPreset.name,     // ä¾‹: "èƒ¸ãƒ»è‚©ã®æ—¥"
  calories: result.totalCalories,    // è¨ˆç®—ã•ã‚ŒãŸæ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼
  time: result.totalTime,            // ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ™‚é–“ï¼ˆç§’ï¼‰
};
```

**ãƒ‡ãƒ¼ã‚¿æ›´æ–°**:
```typescript
if (existingIndex >= 0) {
  // æ—¢å­˜ã®å½“æ—¥ãƒ‡ãƒ¼ã‚¿ã«è¿½åŠ 
  setCalorieHistory(prev =>
    prev.map((d, index) =>
      index === existingIndex
        ? {
            ...d,
            burned: d.burned + result.totalCalories,
            trainingSessions: [...d.trainingSessions, newSession],
          }
        : d
    )
  );
} else {
  // æ–°è¦ä½œæˆ
  setCalorieHistory(prev => [
    {
      date: today,
      consumed: 0,
      burned: result.totalCalories,
      trainingSessions: [newSession],
    },
    ...prev,
  ]);
}
```

---

## 5. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### 5.1 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ„ãƒªãƒ¼

```
App.tsx (Root)
â”œâ”€â”€ TabBar.tsx
â”œâ”€â”€ MenuScreen.tsx (activeTab === 'menu')
â”‚   â”œâ”€â”€ CreatePresetModal.tsx
â”‚   â””â”€â”€ ExerciseItem.tsx (è¤‡æ•°)
â”œâ”€â”€ BodyDataScreen.tsx (activeTab === 'body')
â”‚   â”œâ”€â”€ BodyDataCard.tsx (è¤‡æ•°)
â”‚   â”œâ”€â”€ AddBodyDataModal.tsx
â”‚   â””â”€â”€ BodyDataHistoryModal.tsx
â”œâ”€â”€ CaloriesScreen.tsx (activeTab === 'calories')
â”œâ”€â”€ TrainingSession.tsx (isTraining === true)
â””â”€â”€ TrainingResult.tsx (showTrainingResult === true)
```

### 5.2 å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å½¹å‰²

#### 5.2.1 App.tsx
- **å½¹å‰²**: æœ€ä¸Šä½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€çŠ¶æ…‹ç®¡ç†ã®ä¸­å¿ƒ
- **è²¬å‹™**:
  - å…¨ãƒ‡ãƒ¼ã‚¿ã®çŠ¶æ…‹ç®¡ç†ï¼ˆmenuPresets, bodyDataHistory, calorieHistoryï¼‰
  - ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆç®¡ç†
  - ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°çŠ¶æ…‹ç®¡ç†ï¼ˆisTraining, showTrainingResultï¼‰
  - ãƒ‡ãƒ¼ã‚¿æ“ä½œãƒãƒ³ãƒ‰ãƒ©ãƒ¼ï¼ˆè¿½åŠ ãƒ»æ›´æ–°ãƒ»å‰Šé™¤ï¼‰
  - æ¡ä»¶ä»˜ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆã‚¿ãƒ–ã€ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã€çµæœï¼‰

#### 5.2.2 TabBar.tsx
- **å½¹å‰²**: ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- **è²¬å‹™**:
  - 3ã¤ã®ã‚¿ãƒ–ãƒœã‚¿ãƒ³è¡¨ç¤ºï¼ˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€èº«ä½“ãƒ‡ãƒ¼ã‚¿ã€ã‚«ãƒ­ãƒªãƒ¼ï¼‰
  - ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¿ãƒ–ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤º
  - ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆï¼ˆsetActiveTabï¼‰

#### 5.2.3 MenuScreen.tsx
- **å½¹å‰²**: ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç®¡ç†ç”»é¢
- **è²¬å‹™**:
  - ãƒ—ãƒªã‚»ãƒƒãƒˆä¸€è¦§è¡¨ç¤ºãƒ»é¸æŠ
  - ãƒ—ãƒªã‚»ãƒƒãƒˆä½œæˆãƒ»å‰Šé™¤
  - ç¨®ç›®ä¸€è¦§è¡¨ç¤º
  - ç¨®ç›®è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ 
  - ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹ãƒœã‚¿ãƒ³
- **å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**:
  - `CreatePresetModal.tsx`: ãƒ—ãƒªã‚»ãƒƒãƒˆä½œæˆãƒ¢ãƒ¼ãƒ€ãƒ«
  - `ExerciseItem.tsx`: å„ç¨®ç›®ã®è¡¨ç¤ºãƒ»ç·¨é›†

#### 5.2.4 ExerciseItem.tsx
- **å½¹å‰²**: å˜ä¸€ç¨®ç›®ã®è¡¨ç¤ºãƒ»ç·¨é›†
- **è²¬å‹™**:
  - ç¨®ç›®æƒ…å ±è¡¨ç¤ºï¼ˆåå‰ã€é‡é‡ã€ã‚»ãƒƒãƒˆæ•°ï¼‰
  - ON/OFFãƒˆã‚°ãƒ«
  - å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿
  - ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 
  - å‰Šé™¤ãƒœã‚¿ãƒ³
- **çŠ¶æ…‹**: ãƒ­ãƒ¼ã‚«ãƒ«ï¼ˆexpandedï¼‰

#### 5.2.5 CreatePresetModal.tsx
- **å½¹å‰²**: ãƒ—ãƒªã‚»ãƒƒãƒˆä½œæˆãƒ¢ãƒ¼ãƒ€ãƒ«
- **è²¬å‹™**:
  - ãƒ—ãƒªã‚»ãƒƒãƒˆåå…¥åŠ›
  - ç¨®ç›®è¿½åŠ ï¼ˆè¤‡æ•°ï¼‰
  - ãƒ—ãƒªã‚»ãƒƒãƒˆä¿å­˜
  - æ—¢å­˜ãƒ—ãƒªã‚»ãƒƒãƒˆå‰Šé™¤
- **çŠ¶æ…‹**: ãƒ­ãƒ¼ã‚«ãƒ«ï¼ˆå…¥åŠ›å€¤ã€ç¨®ç›®ãƒªã‚¹ãƒˆï¼‰

#### 5.2.6 BodyDataScreen.tsx
- **å½¹å‰²**: èº«ä½“ãƒ‡ãƒ¼ã‚¿ç®¡ç†ç”»é¢
- **è²¬å‹™**:
  - ãƒ‡ãƒ¼ã‚¿ã‚«ãƒ¼ãƒ‰ä¸€è¦§è¡¨ç¤º
  - ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ãƒœã‚¿ãƒ³
  - å±¥æ­´ãƒ¢ãƒ¼ãƒ€ãƒ«ç®¡ç†
  - ã‚°ãƒ©ãƒ•ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
  - ãƒˆãƒ¬ãƒ³ãƒ‰è¨ˆç®—
- **å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**:
  - `BodyDataCard.tsx`: å„æŒ‡æ¨™ã‚«ãƒ¼ãƒ‰
  - `AddBodyDataModal.tsx`: ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ãƒ¢ãƒ¼ãƒ€ãƒ«
  - `BodyDataHistoryModal.tsx`: å±¥æ­´è¡¨ç¤ºãƒ»ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«

#### 5.2.7 BodyDataCard.tsx
- **å½¹å‰²**: å˜ä¸€æŒ‡æ¨™ã®ã‚«ãƒ¼ãƒ‰è¡¨ç¤º
- **è²¬å‹™**:
  - æŒ‡æ¨™åãƒ»æœ€æ–°å€¤è¡¨ç¤º
  - ãƒˆãƒ¬ãƒ³ãƒ‰è¡¨ç¤ºï¼ˆçŸ¢å°ãƒ»è‰²ï¼‰
  - ãƒŸãƒ‹ã‚°ãƒ©ãƒ•è¡¨ç¤ºï¼ˆ7æ—¥é–“ï¼‰
  - ã‚¿ãƒƒãƒ—ã§å±¥æ­´ãƒ¢ãƒ¼ãƒ€ãƒ«èµ·å‹•

#### 5.2.8 AddBodyDataModal.tsx
- **å½¹å‰²**: èº«ä½“ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ãƒ¢ãƒ¼ãƒ€ãƒ«
- **è²¬å‹™**:
  - å„é …ç›®ã®å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ 
  - ä¿å­˜ãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³
- **çŠ¶æ…‹**: ãƒ­ãƒ¼ã‚«ãƒ«ï¼ˆå…¥åŠ›å€¤ï¼‰

#### 5.2.9 BodyDataHistoryModal.tsx
- **å½¹å‰²**: èº«ä½“ãƒ‡ãƒ¼ã‚¿å±¥æ­´è¡¨ç¤ºãƒ»ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«
- **è²¬å‹™**:
  - å±¥æ­´ä¸€è¦§è¡¨ç¤º
  - ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 
  - å‰Šé™¤æ©Ÿèƒ½ï¼ˆç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ä»˜ãï¼‰
- **çŠ¶æ…‹**: ãƒ­ãƒ¼ã‚«ãƒ«ï¼ˆç·¨é›†ä¸­ã®ã‚¨ãƒ³ãƒˆãƒªIDï¼‰

#### 5.2.10 CaloriesScreen.tsx
- **å½¹å‰²**: ã‚«ãƒ­ãƒªãƒ¼ç®¡ç†ç”»é¢
- **è²¬å‹™**:
  - ä»Šæ—¥ã®ã‚µãƒãƒªãƒ¼è¡¨ç¤º
  - ã‚«ãƒ­ãƒªãƒ¼å…¥åŠ›ãƒ¢ãƒ¼ãƒ€ãƒ«ç®¡ç†
  - é€±é–“ã‚°ãƒ©ãƒ•è¡¨ç¤º
  - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤ºãƒ»ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
  - æ—¥åˆ¥è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«ç®¡ç†
- **çŠ¶æ…‹**: ãƒ­ãƒ¼ã‚«ãƒ«ï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤ºã€å…¥åŠ›å€¤ã€é¸æŠæ—¥ä»˜ã€è¡¨ç¤ºæœˆï¼‰

#### 5.2.11 TrainingSession.tsx
- **å½¹å‰²**: ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é€²è¡Œç”»é¢
- **è²¬å‹™**:
  - ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤ºãƒ»åˆ¶å¾¡
  - ãƒ•ã‚§ãƒ¼ã‚ºç®¡ç†ï¼ˆãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°/ä¼‘æ†©ï¼‰
  - ã‚»ãƒƒãƒˆãƒ»ç¨®ç›®é€²è¡Œç®¡ç†
  - ä¸€æ™‚åœæ­¢ãƒ»å†é–‹ãƒ»ã‚¹ã‚­ãƒƒãƒ—
  - æ™‚é–“è¨˜éŒ²ï¼ˆã‚«ãƒ­ãƒªãƒ¼è¨ˆç®—ç”¨ï¼‰
  - ã‚«ãƒ­ãƒªãƒ¼è¨ˆç®—
  - å®Œäº†å‡¦ç†
- **çŠ¶æ…‹**: ãƒ­ãƒ¼ã‚«ãƒ«ï¼ˆã‚¿ã‚¤ãƒãƒ¼ã€ãƒ•ã‚§ãƒ¼ã‚ºã€é€²æ—ã€æ™‚é–“è¨˜éŒ²ï¼‰

#### 5.2.12 TrainingResult.tsx
- **å½¹å‰²**: ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°çµæœè¡¨ç¤ºç”»é¢
- **è²¬å‹™**:
  - ç·æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼è¡¨ç¤º
  - ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ™‚é–“è¡¨ç¤º
  - å®Œäº†ç¨®ç›®æ•°è¡¨ç¤º
  - ç¨®ç›®åˆ¥è©³ç´°è¡¨ç¤º
  - é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³

### 5.3 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®ä¾å­˜é–¢ä¿‚

```
App.tsx (Data Layer)
    â†“ props
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MenuScreen    â”‚ BodyDataScreenâ”‚ CaloriesScreenâ”‚
â”‚   â†“ props     â”‚   â†“ props     â”‚               â”‚
â”‚ ExerciseItem  â”‚ BodyDataCard  â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“ conditional rendering
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚TrainingSessionâ”‚ TrainingResultâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ãƒ‡ãƒ¼ã‚¿é€£æºãƒ•ãƒ­ãƒ¼

### 6.1 ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Ÿè¡Œæ™‚ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ¡ãƒ‹ãƒ¥ãƒ¼é¸æŠ
   MenuScreen.tsx â†’ setSelectedPresetId()
   
2. ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹
   MenuScreen.tsx â†’ onStartTraining()
   App.tsx â†’ setIsTraining(true)
   
3. TrainingSession.tsx ãƒã‚¦ãƒ³ãƒˆ
   App.tsx â†’ props: exercises, userWeight
   
4. ã‚¿ã‚¤ãƒãƒ¼å®Ÿè¡Œ
   TrainingSession.tsx
   - å„ç¨®ç›®ã®å®Ÿæ–½æ™‚é–“ã‚’è¨˜éŒ²
   - exerciseTimeTracking state ã§ç®¡ç†
   
5. ã‚«ãƒ­ãƒªãƒ¼è¨ˆç®—
   TrainingSession.tsx
   - å„ç¨®ç›®ã”ã¨ã« METs Ã— ä½“é‡ Ã— æ™‚é–“
   - ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ™‚é–“ã®ã¿ã‚«ã‚¦ãƒ³ãƒˆï¼ˆä¼‘æ†©é™¤ãï¼‰
   
6. å®Œäº†å‡¦ç†
   TrainingSession.tsx â†’ onComplete(result)
   App.tsx â†’ handleFinishTraining(result)
   
7. ãƒ‡ãƒ¼ã‚¿ä¿å­˜
   App.tsx â†’ setCalorieHistory()
   - å½“æ—¥ãƒ‡ãƒ¼ã‚¿ã«æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼è¿½åŠ 
   - trainingSession ã¨ã—ã¦è¨˜éŒ²
   
8. çµæœè¡¨ç¤º
   App.tsx â†’ setShowTrainingResult(true)
   TrainingResult.tsx ãƒã‚¦ãƒ³ãƒˆ
   
9. çµæœç¢ºèªå¾Œ
   TrainingResult.tsx â†’ onClose()
   App.tsx â†’ setShowTrainingResult(false)
   MenuScreen.tsx ã«æˆ»ã‚‹
```

### 6.2 èº«ä½“ãƒ‡ãƒ¼ã‚¿æ›´æ–°æ™‚ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
1. ãƒ‡ãƒ¼ã‚¿å…¥åŠ›é–‹å§‹
   BodyDataScreen.tsx â†’ setShowAddModal(true)
   AddBodyDataModal.tsx è¡¨ç¤º
   
2. ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›
   AddBodyDataModal.tsx
   - ãƒ­ãƒ¼ã‚«ãƒ«state ã§å…¥åŠ›å€¤ç®¡ç†
   
3. ä¿å­˜
   AddBodyDataModal.tsx â†’ onAddBodyData(data)
   BodyDataScreen.tsx â†’ onAddBodyData(data) (propsçµŒç”±)
   App.tsx â†’ handleAddBodyData(data)
   
4. ãƒ‡ãƒ¼ã‚¿æ›´æ–°
   App.tsx â†’ setBodyDataHistory()
   - å½“æ—¥ãƒ‡ãƒ¼ã‚¿å­˜åœ¨ãƒã‚§ãƒƒã‚¯
   - å­˜åœ¨ â†’ ä¸Šæ›¸ãï¼ˆmapï¼‰
   - éå­˜åœ¨ â†’ è¿½åŠ ï¼ˆé…åˆ—å…ˆé ­ï¼‰
   
5. UIå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
   BodyDataScreen.tsx ãŒæ–°ã—ã„ bodyDataHistory ã‚’å—ã‘å–ã‚‹
   BodyDataCard.tsx ãŒå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
   - æœ€æ–°å€¤æ›´æ–°
   - ãƒˆãƒ¬ãƒ³ãƒ‰å†è¨ˆç®—
   - ã‚°ãƒ©ãƒ•å†æç”»
```

### 6.3 ãƒ—ãƒªã‚»ãƒƒãƒˆä½œæˆæ™‚ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
1. ãƒ—ãƒªã‚»ãƒƒãƒˆä½œæˆé–‹å§‹
   MenuScreen.tsx â†’ setIsCreatePresetModalOpen(true)
   CreatePresetModal.tsx è¡¨ç¤º
   
2. ãƒ—ãƒªã‚»ãƒƒãƒˆåãƒ»ç¨®ç›®å…¥åŠ›
   CreatePresetModal.tsx
   - ãƒ­ãƒ¼ã‚«ãƒ«state ã§ç®¡ç†
   - ç¨®ç›®è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ 
   
3. ä¿å­˜
   CreatePresetModal.tsx â†’ onCreatePreset(name, exercises)
   MenuScreen.tsx â†’ onCreatePreset(name, exercises) (propsçµŒç”±)
   App.tsx â†’ handleCreatePreset(name, exercises)
   
4. ãƒ‡ãƒ¼ã‚¿è¿½åŠ 
   App.tsx
   - æ–°è¦ MenuPreset ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
   - setMenuPresets(prev => [...prev, newPreset])
   - setSelectedPresetId(newPreset.id) ã§è‡ªå‹•é¸æŠ
   
5. UIå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
   MenuScreen.tsx ãŒæ–°ã—ã„ menuPresets ã‚’å—ã‘å–ã‚‹
   - ãƒ—ãƒªã‚»ãƒƒãƒˆä¸€è¦§ã«æ–°ãƒ—ãƒªã‚»ãƒƒãƒˆè¡¨ç¤º
   - æ–°ãƒ—ãƒªã‚»ãƒƒãƒˆãŒãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤º
   - ã€Œä»Šæ—¥ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€ã«æ–°ãƒ—ãƒªã‚»ãƒƒãƒˆã®ç¨®ç›®è¡¨ç¤º
```

### 6.4 ã‚«ãƒ­ãƒªãƒ¼æ‰‹å‹•å…¥åŠ›æ™‚ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
1. ã‚«ãƒ­ãƒªãƒ¼å…¥åŠ›é–‹å§‹
   CaloriesScreen.tsx â†’ setShowAddModal(true)
   ã‚«ãƒ­ãƒªï¿½ï¿½ï¿½å…¥åŠ›ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
   
2. ã‚¿ã‚¤ãƒ—é¸æŠãƒ»ã‚«ãƒ­ãƒªãƒ¼å…¥åŠ›
   CaloriesScreen.tsx
   - setCalorieType('consumed' | 'burned')
   - setCalorieInput(value)
   - setActivityNameInput(value) â€»æ¶ˆè²»ã®å ´åˆ
   
3. ä¿å­˜
   CaloriesScreen.tsx â†’ onAddConsumedCalories(calories)
                       or onAddBurnedCalories(calories, activityName)
   App.tsx â†’ handleAddConsumedCalories(calories)
          or handleAddBurnedCalories(calories, activityName)
   
4. ãƒ‡ãƒ¼ã‚¿æ›´æ–°
   App.tsx â†’ setCalorieHistory()
   - å½“æ—¥ãƒ‡ãƒ¼ã‚¿å­˜åœ¨ãƒã‚§ãƒƒã‚¯
   - å­˜åœ¨ â†’ åŠ ç®—ï¼ˆmapï¼‰
   - éå­˜åœ¨ â†’ æ–°è¦ä½œæˆï¼ˆé…åˆ—å…ˆé ­ï¼‰
   
5. UIå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
   CaloriesScreen.tsx ãŒæ–°ã—ã„ calorieHistory ã‚’å—ã‘å–ã‚‹
   - ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰æ›´æ–°
   - ã‚°ãƒ©ãƒ•æ›´æ–°
   - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ›´æ–°
```

---

## 7. APIè¨­è¨ˆï¼ˆå°†æ¥å®Ÿè£…ï¼‰

### 7.1 RESTful API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### 7.1.1 èªè¨¼

```
POST /api/auth/register
POST /api/auth/login
POST /api/auth/logout
GET  /api/auth/me
```

#### 7.1.2 ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ—ãƒªã‚»ãƒƒãƒˆ

```
GET    /api/presets              # å…¨ãƒ—ãƒªã‚»ãƒƒãƒˆå–å¾—
GET    /api/presets/:id          # å˜ä¸€ãƒ—ãƒªã‚»ãƒƒãƒˆå–å¾—
POST   /api/presets              # ãƒ—ãƒªã‚»ãƒƒãƒˆä½œæˆ
PUT    /api/presets/:id          # ãƒ—ãƒªã‚»ãƒƒãƒˆæ›´æ–°
DELETE /api/presets/:id          # ãƒ—ãƒªã‚»ãƒƒãƒˆå‰Šé™¤
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "id": "preset_123",
  "name": "èƒ¸ãƒ»è‚©ã®æ—¥",
  "exercises": [
    {
      "id": "ex_456",
      "name": "ãƒ™ãƒ³ãƒãƒ—ãƒ¬ã‚¹",
      "weight": 60,
      "sets": 3,
      "restTime": 90,
      "trainingTime": 60,
      "enabled": true,
      "orderIndex": 0
    }
  ],
  "createdAt": "2025-12-31T10:00:00Z",
  "updatedAt": "2025-12-31T10:00:00Z"
}
```

#### 7.1.3 ç¨®ç›®

```
POST   /api/presets/:presetId/exercises           # ç¨®ç›®è¿½åŠ 
PUT    /api/exercises/:id                         # ç¨®ç›®æ›´æ–°
DELETE /api/exercises/:id                         # ç¨®ç›®å‰Šé™¤
PUT    /api/presets/:presetId/exercises/reorder   # ç¨®ç›®é †åºå¤‰æ›´
```

#### 7.1.4 èº«ä½“ãƒ‡ãƒ¼ã‚¿

```
GET    /api/body-data?from=YYYY-MM-DD&to=YYYY-MM-DD  # æœŸé–“æŒ‡å®šå–å¾—
GET    /api/body-data/:date                          # ç‰¹å®šæ—¥å–å¾—
POST   /api/body-data                                # ãƒ‡ãƒ¼ã‚¿è¿½åŠ 
PUT    /api/body-data/:date                          # ãƒ‡ãƒ¼ã‚¿æ›´æ–°
DELETE /api/body-data/:date                          # ãƒ‡ãƒ¼ã‚¿å‰Šé™¤
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "date": "2025-12-31",
  "weight": 72.5,
  "bodyFat": 18.5,
  "muscleMass": 56.2,
  "bmi": 23.1,
  "waterContent": 58.5,
  "visceralFat": 8,
  "basalMetabolism": 1680,
  "createdAt": "2025-12-31T09:00:00Z",
  "updatedAt": "2025-12-31T09:00:00Z"
}
```

#### 7.1.5 ã‚«ãƒ­ãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿

```
GET    /api/calories?from=YYYY-MM-DD&to=YYYY-MM-DD  # æœŸé–“æŒ‡å®šå–å¾—
GET    /api/calories/:date                          # ç‰¹å®šæ—¥å–å¾—
POST   /api/calories/:date/consumed                 # æ‘‚å–ã‚«ãƒ­ãƒªãƒ¼è¿½åŠ 
POST   /api/calories/:date/burned                   # æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼è¿½åŠ 
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "date": "2025-12-31",
  "consumed": 2200,
  "burned": 450,
  "trainingSessions": [
    {
      "id": "session_789",
      "menuName": "èƒ¸ãƒ»è‚©ã®æ—¥",
      "calories": 450,
      "time": 3600,
      "completedAt": "2025-12-31T18:00:00Z"
    }
  ],
  "createdAt": "2025-12-31T08:00:00Z",
  "updatedAt": "2025-12-31T18:00:00Z"
}
```

#### 7.1.6 ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ­ã‚°

```
GET    /api/training-logs?from=YYYY-MM-DD&to=YYYY-MM-DD  # æœŸé–“æŒ‡å®šå–å¾—
GET    /api/training-logs/:id                            # å˜ä¸€ãƒ­ã‚°å–å¾—
POST   /api/training-logs                                # ãƒ­ã‚°ä½œæˆ
PUT    /api/training-logs/:id                            # ãƒ­ã‚°æ›´æ–°
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "id": "log_999",
  "presetId": "preset_123",
  "menuName": "èƒ¸ãƒ»è‚©ã®æ—¥",
  "startedAt": "2025-12-31T17:00:00Z",
  "completedAt": "2025-12-31T18:00:00Z",
  "totalTime": 3600,
  "totalCalories": 450,
  "status": "completed",
  "exercises": [
    {
      "exerciseId": "ex_456",
      "name": "ãƒ™ãƒ³ãƒãƒ—ãƒ¬ã‚¹",
      "weight": 60,
      "setsCompleted": 3,
      "totalTime": 1200,
      "calories": 150
    }
  ]
}
```

### 7.2 GraphQL APIï¼ˆä»£æ›¿æ¡ˆï¼‰

#### 7.2.1 ã‚¹ã‚­ãƒ¼ãƒä¾‹

```graphql
type User {
  id: ID!
  name: String!
  email: String!
  weight: Float
  menuPresets: [MenuPreset!]!
  bodyData: [BodyData!]!
  calorieData: [CalorieData!]!
  trainingLogs: [TrainingLog!]!
}

type MenuPreset {
  id: ID!
  name: String!
  exercises: [Exercise!]!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type Exercise {
  id: ID!
  name: String!
  weight: Float!
  sets: Int!
  restTime: Int!
  trainingTime: Int!
  enabled: Boolean!
  memo: String
  youtubeUrl: String
  orderIndex: Int!
}

type BodyData {
  date: Date!
  weight: Float
  bodyFat: Float
  muscleMass: Float
  bmi: Float
  waterContent: Float
  visceralFat: Int
  basalMetabolism: Int
}

type CalorieData {
  date: Date!
  consumed: Int!
  burned: Int!
  trainingSessions: [TrainingSession!]!
}

type TrainingSession {
  id: ID!
  menuName: String!
  calories: Int!
  time: Int!
  completedAt: DateTime!
}

type Query {
  me: User
  menuPreset(id: ID!): MenuPreset
  bodyData(from: Date!, to: Date!): [BodyData!]!
  calorieData(from: Date!, to: Date!): [CalorieData!]!
  trainingLogs(from: Date!, to: Date!): [TrainingLog!]!
}

type Mutation {
  createMenuPreset(input: CreateMenuPresetInput!): MenuPreset!
  updateMenuPreset(id: ID!, input: UpdateMenuPresetInput!): MenuPreset!
  deleteMenuPreset(id: ID!): Boolean!
  
  addBodyData(date: Date!, input: BodyDataInput!): BodyData!
  updateBodyData(date: Date!, input: BodyDataInput!): BodyData!
  deleteBodyData(date: Date!): Boolean!
  
  addConsumedCalories(date: Date!, calories: Int!): CalorieData!
  addBurnedCalories(date: Date!, calories: Int!, activityName: String): CalorieData!
  
  createTrainingLog(input: CreateTrainingLogInput!): TrainingLog!
  completeTrainingLog(id: ID!, input: CompleteTrainingLogInput!): TrainingLog!
}
```

### 7.3 ãƒ‡ãƒ¼ã‚¿åŒæœŸæˆ¦ç•¥

#### 7.3.1 ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ

**ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆè¨­è¨ˆ**:
1. ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ã‚«ãƒ«DBï¼ˆSQLiteï¼‰ã«ä¿å­˜
2. ã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ™‚ã«ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨åŒæœŸ
3. ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã‚‚ã‚¢ãƒ—ãƒªã¯å®Œå…¨å‹•ä½œ

**åŒæœŸãƒ•ãƒ­ãƒ¼**:
```
ã‚¢ãƒ—ãƒªèµ·å‹•
    â†“
ãƒ­ãƒ¼ã‚«ãƒ«DBã‹ã‚‰ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
    â†“ ï¼ˆå³åº§ã«è¡¨ç¤ºï¼‰
ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§åŒæœŸé–‹å§‹
    â†“
ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰æœ€æ–°ãƒ‡ãƒ¼ã‚¿å–å¾—
    â†“
ãƒ­ãƒ¼ã‚«ãƒ«DBã¨æ¯”è¼ƒï¼ˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãƒ™ãƒ¼ã‚¹ï¼‰
    â†“
ç«¶åˆè§£æ±ºï¼ˆLast-Write-Wins or Manualï¼‰
    â†“
ãƒ­ãƒ¼ã‚«ãƒ«DBæ›´æ–°
    â†“
UIã«åæ˜ 
```

#### 7.3.2 ç«¶åˆè§£æ±º

**æˆ¦ç•¥1: Last-Write-Wins**
- `updatedAt` ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã§åˆ¤å®š
- æœ€å¾Œã«æ›´æ–°ã•ã‚ŒãŸæ–¹ã‚’æ¡ç”¨
- ã‚·ãƒ³ãƒ—ãƒ«ã ãŒã€ãƒ‡ãƒ¼ã‚¿ãƒ­ã‚¹ã®å¯èƒ½æ€§ã‚ã‚Š

**æˆ¦ç•¥2: Manual Resolution**
- ç«¶åˆæ¤œçŸ¥æ™‚ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é¸æŠã•ã›ã‚‹
- ã‚ˆã‚Šç¢ºå®Ÿã ãŒã€UX ãŒæ‚ªåŒ–

**æ¨å¥¨**: èº«ä½“ãƒ‡ãƒ¼ã‚¿ãƒ»ã‚«ãƒ­ãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ã¯ Last-Write-Winsã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ—ãƒªã‚»ãƒƒãƒˆã¯ Manual Resolution

#### 7.3.3 åŒæœŸã‚¿ã‚¤ãƒŸãƒ³ã‚°

- ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚
- ã‚¢ãƒ—ãƒªãŒãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã«æˆ»ã£ãŸã¨ã
- ãƒ‡ãƒ¼ã‚¿å¤‰æ›´å¾Œï¼ˆãƒ‡ãƒã‚¦ãƒ³ã‚¹: 5ç§’ï¼‰
- æ‰‹å‹•åŒæœŸãƒœã‚¿ãƒ³

---

## 8. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 8.1 ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æœ€é©åŒ–

#### 8.1.1 React.memo ã®æ´»ç”¨

**æœ€é©åŒ–å¯¾è±¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**:
```typescript
export const ExerciseItem = React.memo(({ exercise, onUpdate, onDelete }: ExerciseItemProps) => {
  // ...
});

export const BodyDataCard = React.memo(({ title, value, unit, ... }: BodyDataCardProps) => {
  // ...
});
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- Props ãŒå¤‰ã‚ã‚‰ãªã„é™ã‚Šå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ãªã„
- ãƒªã‚¹ãƒˆè¡¨ç¤ºæ™‚ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š

#### 8.1.2 useCallback / useMemo ã®æ´»ç”¨

```typescript
// App.tsx
const handleUpdateExercise = useCallback((id: string, updates: Partial<Exercise>) => {
  if (!selectedPreset) return;
  
  setMenuPresets(prev =>
    prev.map(preset =>
      preset.id === selectedPresetId
        ? {
            ...preset,
            exercises: preset.exercises.map(ex =>
              ex.id === id ? { ...ex, ...updates } : ex
            ),
          }
        : preset
    )
  );
}, [selectedPresetId, selectedPreset]);

// BodyDataScreen.tsx
const chartData = useMemo(() => {
  return bodyDataHistory
    .slice(0, 7)
    .reverse()
    .map(d => ({ value: d.weight || 0 }));
}, [bodyDataHistory]);
```

#### 8.1.3 ä»®æƒ³åŒ–ï¼ˆå°†æ¥ï¼‰

é•·ã„ãƒªã‚¹ãƒˆã«ã¯ `react-window` ã‚„ `react-virtualized` ã‚’ä½¿ç”¨:
```typescript
import { FixedSizeList } from 'react-window';

<FixedSizeList
  height={600}
  itemCount={bodyDataHistory.length}
  itemSize={80}
  width="100%"
>
  {({ index, style }) => (
    <div style={style}>
      <BodyDataCard data={bodyDataHistory[index]} />
    </div>
  )}
</FixedSizeList>
```

### 8.2 ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰æœ€é©åŒ–

#### 8.2.1 é…å»¶ãƒ­ãƒ¼ãƒ‰

```typescript
// ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’é…å»¶ãƒ­ãƒ¼ãƒ‰
const AddBodyDataModal = lazy(() => import('./AddBodyDataModal'));

<Suspense fallback={<LoadingSpinner />}>
  {showAddModal && <AddBodyDataModal ... />}
</Suspense>
```

#### 8.2.2 ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³

```typescript
// å°†æ¥å®Ÿè£…
const [page, setPage] = useState(0);
const pageSize = 30;

const paginatedData = bodyDataHistory.slice(page * pageSize, (page + 1) * pageSize);
```

#### 8.2.3 ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°

```typescript
// React Query ã‚’ä½¿ç”¨ï¼ˆå°†æ¥ï¼‰
import { useQuery } from 'react-query';

const { data, isLoading } = useQuery(
  ['bodyData', from, to],
  () => fetchBodyData(from, to),
  {
    staleTime: 5 * 60 * 1000, // 5åˆ†é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥
    cacheTime: 30 * 60 * 1000, // 30åˆ†é–“ä¿æŒ
  }
);
```

### 8.3 ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æœ€é©åŒ–

#### 8.3.1 CSS Transform ã®ä½¿ç”¨

```css
/* ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®è‰¯ã„æ–¹æ³• */
.button {
  transition: transform 0.2s;
}
.button:active {
  transform: scale(0.95);
}

/* é¿ã‘ã‚‹ã¹ãæ–¹æ³• */
.button:active {
  width: 95%;
  height: 95%;
}
```

#### 8.3.2 will-change ã®æ´»ç”¨

```css
.modal {
  will-change: opacity, transform;
}
```

### 8.4 ãƒ¡ãƒ¢ãƒªç®¡ç†

#### 8.4.1 ã‚¿ã‚¤ãƒãƒ¼ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

```typescript
useEffect(() => {
  const timer = setInterval(() => {
    // ...
  }, 1000);

  return () => clearInterval(timer); // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
}, [dependencies]);
```

#### 8.4.2 ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

```typescript
useEffect(() => {
  const handleResize = () => {
    // ...
  };

  window.addEventListener('resize', handleResize);
  return () => window.removeEventListener('resize', handleResize);
}, []);
```

---

## 9. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …ï¼ˆå°†æ¥å®Ÿè£…ï¼‰

### 9.1 èªè¨¼ãƒ»èªå¯

- JWT ãƒˆãƒ¼ã‚¯ãƒ³ãƒ™ãƒ¼ã‚¹ã®èªè¨¼
- Refresh Token ã«ã‚ˆã‚‹è‡ªå‹•æ›´æ–°
- Role-Based Access Control (RBAC)

### 9.2 ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–

- é€šä¿¡: HTTPS/TLS
- ãƒ­ãƒ¼ã‚«ãƒ«DB: SQLCipherï¼ˆæš—å·åŒ–SQLiteï¼‰
- æ©Ÿå¯†æƒ…å ±: Keychain (iOS) / Keystore (Android)

### 9.3 å…¥åŠ›æ¤œè¨¼

- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´: ãƒ•ã‚©ãƒ¼ãƒ æ¤œè¨¼
- ã‚µãƒ¼ãƒãƒ¼å´: ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼ï¼ˆJoi, Yup ãªã©ï¼‰
- SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã‚¯ã‚¨ãƒª

---

## 10. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 10.1 ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

```typescript
// ã‚«ãƒ­ãƒªãƒ¼è¨ˆç®—ã®ãƒ†ã‚¹ãƒˆ
describe('calculateCalories', () => {
  it('é«˜å¼·åº¦ï¼ˆ0.5ä»¥ä¸Šï¼‰ã®å ´åˆã€8.0 METs ã§è¨ˆç®—', () => {
    const calories = calculateCalories(70, 8.0, 300);
    expect(calories).toBeCloseTo(46.67, 2);
  });
});
```

### 10.2 çµ±åˆãƒ†ã‚¹ãƒˆ

```typescript
// ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®ãƒ†ã‚¹ãƒˆ
describe('Training Flow', () => {
  it('ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Œäº†å¾Œã€ã‚«ãƒ­ãƒªãƒ¼ãŒè‡ªå‹•è¨˜éŒ²ã•ã‚Œã‚‹', async () => {
    const { getByText } = render(<App />);
    
    // ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹
    fireEvent.click(getByText('ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹'));
    
    // å®Œäº†ã¾ã§é€²ã‚ã‚‹ï¼ˆmockï¼‰
    await waitFor(() => {
      expect(getByText('ãŠç–²ã‚Œæ§˜ã§ã—ãŸ')).toBeInTheDocument();
    });
    
    // ã‚«ãƒ­ãƒªãƒ¼ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
    fireEvent.click(getByText('å®Œäº†'));
    fireEvent.click(getByText('ã‚«ãƒ­ãƒªãƒ¼'));
    
    expect(getByText(/æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼/)).toBeInTheDocument();
  });
});
```

### 10.3 E2Eãƒ†ã‚¹ãƒˆ

```typescript
// Detox ã‚’ä½¿ç”¨ï¼ˆReact Nativeï¼‰
describe('App E2E', () => {
  it('æ–°ã—ã„ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ä½œæˆã—ã¦ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’å®Ÿè¡Œã§ãã‚‹', async () => {
    await element(by.text('æ–°ã—ã„ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ä½œæˆ')).tap();
    await element(by.id('preset-name-input')).typeText('ãƒ†ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼');
    // ... ç¨®ç›®è¿½åŠ 
    await element(by.text('ä¿å­˜')).tap();
    await element(by.text('ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹')).tap();
    // ... ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é€²è¡Œ
    await expect(element(by.text('ãŠç–²ã‚Œæ§˜ã§ã—ãŸ'))).toBeVisible();
  });
});
```

---

## 11. ã¾ã¨ã‚

ã“ã®ã‚¢ãƒ—ãƒªã¯ã€ä»¥ä¸‹ã®ç‰¹å¾´ã‚’æŒã¤ç­‹ãƒˆãƒ¬ç®¡ç†ã‚¢ãƒ—ãƒªã§ã™ï¼š

**ãƒ‡ãƒ¼ã‚¿ç®¡ç†**:
- ãƒ¡ãƒ¢ãƒªä¸Šã®çŠ¶æ…‹ç®¡ç†ï¼ˆReact Hooksï¼‰
- å°†æ¥çš„ã«ãƒ­ãƒ¼ã‚«ãƒ«DBãƒ»ã‚¯ãƒ©ã‚¦ãƒ‰DBé€£æº

**æ©Ÿèƒ½**:
- ãƒ—ãƒªã‚»ãƒƒãƒˆãƒ™ãƒ¼ã‚¹ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç®¡ç†
- ã‚¿ã‚¤ãƒãƒ¼ãƒ»è‡ªå‹•é€²è¡Œã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Ÿè¡Œ
- METsæ³•ã«ã‚ˆã‚‹æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼è¨ˆç®—
- èº«ä½“ãƒ‡ãƒ¼ã‚¿ã®è¨˜éŒ²ãƒ»å±¥æ­´ãƒ»ã‚°ãƒ©ãƒ•è¡¨ç¤º
- ã‚«ãƒ­ãƒªãƒ¼ã®æ‰‹å‹•å…¥åŠ›ãƒ»è‡ªå‹•è¨˜éŒ²ãƒ»ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º

**ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**:
- App.tsx ã‚’ä¸­å¿ƒã¨ã—ãŸçŠ¶æ…‹ç®¡ç†
- Props Drilling ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ä¼æ’­
- Callbacké–¢æ•°ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿æ›´æ–°

**å°†æ¥æ‹¡å¼µ**:
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é€£æºï¼ˆSQLite / Cloud DBï¼‰
- RESTful or GraphQL API
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œãƒ»åŒæœŸæ©Ÿèƒ½
- é«˜åº¦ãªçµ±è¨ˆãƒ»ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½

ã“ã®ã‚¢ãƒ—ãƒªã¯ã€ã‚·ãƒ³ãƒ—ãƒ«ãªè¨­è¨ˆã§ã‚ã‚ŠãªãŒã‚‰ã€æ‹¡å¼µæ€§ã‚’è€ƒæ…®ã—ãŸæ§‹é€ ã«ãªã£ã¦ã„ã¾ã™ã€‚

---

**æ–‡æ›¸ä½œæˆæ—¥**: 2025å¹´12æœˆ31æ—¥  
**æœ€çµ‚æ›´æ–°æ—¥**: 2025å¹´12æœˆ31æ—¥  
**ä½œæˆè€…**: AI Assistant  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
